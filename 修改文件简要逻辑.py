a=[
    [
        38.83289655413446,
        105.68188905715944
    ],
    [
        38.832888196605985,
        105.68170666694641
    ],
    [
        38.83298848688316,
        105.68167448043823
    ],
    [
        38.83308877701905,
        105.6820070743561
    ],
    [
        38.83318906701361,
        105.68213582038881
    ],
    [
        38.83294669928484,
        105.68264007568361
    ],
    [
        38.832921626714075,
        105.68314433097841
    ],
    [
        38.83299684439988,
        105.68321943283082
    ],
    [
        38.83298848688316,
        105.68261861801149
    ],
    [
        38.83303863196879,
        105.68264007568361
    ],
    [
        38.83301355943039,
        105.68303704261781
    ],
    [
        38.833021916944155,
        105.68315505981447
    ],
    [
        38.83287983907649,
        105.68332672119142
    ],
    [
        38.83287983907649,
        105.68345546722412
    ],
    [
        38.83286312401459,
        105.68402409553529
    ],
    [
        38.83278790618746,
        105.68377733230591
    ],
    [
        38.8327294033781,
        105.68369150161745
    ],
    [
        38.83265418540963,
        105.68357348442079
    ],
    [
        38.83247031892994,
        105.68351984024049
    ],
    [
        38.832219591146746,
        105.68367004394533
    ],
    [
        38.8322446639648,
        105.68379878997803
    ],
    [
        38.83222794875377,
        105.68384170532228
    ],
    [
        38.83231152476982,
        105.68387389183046
    ],
    [
        38.832219591146746,
        105.6833589076996
    ],
    [
        38.83206079642726,
        105.68336963653566
    ],
    [
        38.83203572354444,
        105.68342328071594
    ],
    [
        38.83214437263957,
        105.68344473838806
    ],
    [
        38.832052438800645,
        105.68314433097841
    ],
    [
        38.83203572354444,
        105.68331599235536
    ],
    [
        38.83204408117302,
        105.68300485610963
    ],
    [
        38.83199393538675,
        105.68294048309328
    ],
    [
        38.83192707428345,
        105.68284392356874
    ],
    [
        38.831810067201516,
        105.68288683891298
    ],
    [
        38.8316679869149,
        105.68288683891298
    ],
    [
        38.83174320592552,
        105.68266153335573
    ],
    [
        38.83183514016385,
        105.68258643150331
    ],
    [
        38.83183514016385,
        105.6825113296509
    ],
    [
        38.83186021311732,
        105.68246841430665
    ],
    [
        38.83193543192479,
        105.68239331245422
    ],
    [
        38.83196886248037,
        105.68220019340517
    ],
    [
        38.831943789565145,
        105.68206071853638
    ],
    [
        38.832052438800645,
        105.68194270133974
    ],
    [
        38.832136015022755,
        105.68182468414308
    ],
    [
        38.832152730255395,
        105.68178176879884
    ],
    [
        38.832161087870276,
        105.68174958229066
    ],
    [
        38.832386743100336,
        105.68169593811035
    ],
    [
        38.832353312741034,
        105.68162083625795
    ],
    [
        38.83231152476982,
        105.68161010742189
    ],
    [
        38.83229480957446,
        105.68166375160219
    ],
    [
        38.8322864519753,
        105.68170666694641
    ],
    [
        38.83252046438062,
        105.68165302276613
    ],
    [
        38.83265418540963,
        105.68164229393007
    ],
    [
        38.832746118471384,
        105.68164229393007
    ],
    [
        38.83281297880535,
        105.68163156509401
    ],
    [
        38.83294669928484,
        105.68162083625795
    ],
    [
        38.83299684439988,
        105.68162083625795
    ],
    [
        38.83303863196879,
        105.68163156509401
    ],
    [
        38.83303027445696,
        105.68171739578247
    ],
    [
        38.83303027445696,
        105.68185687065126
    ],
    [
        38.83309713452401,
        105.68192124366762
    ],
    [
        38.83318906701361,
        105.68193197250368
    ],
    [
        38.833239211957924,
        105.68192124366762
    ],
    [
        38.83320578199899,
        105.68211436271669
    ],
    [
        38.833230854469655,
        105.68216800689699
    ],
    [
        38.83327264190116,
        105.68210363388063
    ],
    [
        38.833247569445206,
        105.68193197250368
    ],
    [
        38.83289655413446,
        105.68188905715944
    ]
]

import geopandas as gpd
import folium
from shapely.wkt import loads

# 将给定的经纬度坐标点列表转换为 ArcGIS 中的 POLYGON 格式字符串
polygon_string = "POLYGON (("

# 构建多边形字符串
for point in a:
    polygon_string += f"{point[1]} {point[0]}, "

# 添加第一个坐标点以闭合多边形
first_point = a[0]
polygon_string += f"{first_point[1]} {first_point[0]}))"

# 打印转换后的多边形字符串
#print("ArcGIS Polygon string:", polygon_string)

# 使用 Shapely 创建多边形几何对象
polygon_geom = loads(polygon_string)

# 读取 Shapefile 文件
gdf = gpd.read_file('uploads/阿拉善盟.shp')

area=0.006584664726371621
City_CODE=0
UUID=0

Level1='公园与绿地用地'
Level2='公园与绿地用地'

# 计算经纬度的平均值
mean_lat = sum(point[0] for point in a) / len(a)
mean_lon = sum(point[1] for point in a) / len(a)

# 添加新行数据
new_row = {
    'Lon': mean_lon,
    'Lat': mean_lat,
    'F_AREA': 0.006584664726371621,
    'City_CODE': 0,
    'UUID': 0,
    'Level1': '公园与绿地用地',
    'Level2': '公园与绿地用地',
    'Level1_cn': '公园与绿地用地',
    'Level2_cn': '公园与绿地用地',
    'geometry': polygon_geom  # 如果不包含几何信息，可以设置为 None
}

# 将新行数据添加到 gdf 中
gdf = gdf.append(new_row, ignore_index=True)

# 将 DataFrame 转换为 GeoDataFrame
gdf = gpd.GeoDataFrame(gdf, geometry='geometry')

# 指定保存文件的路径和文件格式（这里以 ESRI Shapefile 格式为例）
output_file = "output.shp"

# 将 GeoDataFrame 保存到文件中
gdf.to_file(output_file, encoding="utf-8")

print("GeoDataFrame saved to:", output_file)
